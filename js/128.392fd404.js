"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[128],{4342:function(e,s,n){n.r(s),n.d(s,{default:function(){return c}});var i=n(6669),t=n(4908);function o(e,s,n,o,a,r){const u=i.A;return(0,t.uX)(),(0,t.Wv)(u,{title:r.loginTitle,fields:a.loginFields,"submit-text":"登录","background-key":"loginBkImg","is-admin":!1,loading:a.isLoading,onSubmit:r.handleLogin},null,8,["title","fields","loading","onSubmit"])}n(2093);var a=n(962),r=n.n(a),u=n(7845),d=n(5272),l={data(){return{isLoading:!1,loginFields:[{key:"password",label:"密码",placeholder:"请输入认证码",type:"password",showPassword:!0,icon:"Lock"}]}},computed:{...(0,d.L8)(["userConfig"]),ownerName(){return this.userConfig?.ownerName||"Sanyue"},loginTitle(){return`登录到 ${this.ownerName} 图床`}},components:{BaseLogin:i.A},methods:{async handleLogin(e){const{password:s}=e,n=""===s?"unset":s;this.isLoading=!0;const i=new Promise(e=>setTimeout(e,500)),t=u.A.post("/api/login",{authCode:s}).then(e=>({res:e})).catch(e=>({err:e}));try{const[e]=await Promise.all([t,i]);e.res&&200===e.res.status?(r().set("authCode",n,"14d"),this.$router.push("/"),this.$message.success("登录成功")):(this.isLoading=!1,this.$message.error("登录失败，请检查密码是否正确"))}catch(o){this.isLoading=!1,this.$message.error("系统错误")}}}},g=n(5074);const h=(0,g.A)(l,[["render",o]]);var c=h}}]);
//# sourceMappingURL=128.392fd404.js.map