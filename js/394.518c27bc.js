"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[394],{7624:function(e,s,n){n.r(s),n.d(s,{default:function(){return u}});var o=n(6669),r=n(4908);function t(e,s,n,t,i,a){const d=o.A;return(0,r.uX)(),(0,r.Wv)(d,{title:"管理端登录",fields:i.loginFields,"submit-text":"登录","background-key":"adminLoginBkImg","is-admin":!0,loading:i.isLoading,onSubmit:a.handleLogin},null,8,["fields","loading","onSubmit"])}n(2093),n(616);var i=n(7845),a={data(){return{isLoading:!1,loginFields:[{key:"username",label:"用户名",placeholder:"请输入用户名",type:"text",icon:"User"},{key:"password",label:"密码",placeholder:"请输入密码",type:"password",showPassword:!0,icon:"Lock"}]}},components:{BaseLogin:o.A},methods:{async handleLogin(e){const{username:s,password:n}=e,o=btoa(`${s}:${n}`);this.isLoading=!0;const r=new Promise(e=>setTimeout(e,1e3)),t=i.A.get("/api/manage/check",{headers:{Authorization:`Basic ${o}`},withCredentials:!0}).then(e=>({response:e})).catch(e=>({error:e}));try{const[e]=await Promise.all([t,r]);if(e.response&&200===e.response.status)this.$store.commit("setCredentials",o),this.$router.push("/dashboard");else{const s=e.error||new Error("Unknown error");this.isLoading=!1,s.response&&401===s.response.status?this.$message.error("用户名或密码错误"):this.$message.error("服务器错误")}}catch(a){this.isLoading=!1,this.$message.error("系统错误")}}}},d=n(5074);const l=(0,d.A)(a,[["render",t]]);var u=l}}]);
//# sourceMappingURL=394.518c27bc.js.map