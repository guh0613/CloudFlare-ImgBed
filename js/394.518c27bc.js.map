{"version":3,"file":"js/394.518c27bc.js","mappings":"8LACO,SAASA,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,MAAMC,EAAuB,IAC7B,OAAO,WAAc,QAAaA,EAAsB,CACtDC,MAAO,QACPC,OAAQJ,EAAMK,YACd,cAAe,KACf,iBAAkB,kBAClB,YAAY,EACZC,QAASN,EAAMO,UACfC,SAAUP,EAASQ,aAClB,KAAM,EAAG,CAAC,SAAU,UAAW,YACpC,C,6BCRA,GACE,IAAAC,GACE,MAAO,CACLH,WAAW,EACXF,YAAa,CAAC,CACZM,IAAK,WACLC,MAAO,MACPC,YAAa,SACbC,KAAM,OACNC,KAAM,QACL,CACDJ,IAAK,WACLC,MAAO,KACPC,YAAa,QACbC,KAAM,WACNE,cAAc,EACdD,KAAM,SAGZ,EACAE,WAAY,CACVC,UAAS,KAEXC,QAAS,CACP,iBAAMV,CAAYW,GAChB,MAAM,SACJC,EAAQ,SACRC,GACEF,EACEG,EAAcC,KAAK,GAAGH,KAAYC,KAExCG,KAAKlB,WAAY,EAGjB,MAAMmB,EAAkB,IAAIC,QAAQC,GAAWC,WAAWD,EAAS,MAE7DE,EAAeC,EAAA,EAAMC,IAAI,oBAAqB,CAClDC,QAAS,CACP,cAAiB,SAASV,KAE5BW,iBAAiB,IAChBC,KAAKC,IAAY,CAClBA,cACEC,MAAMC,IAAS,CACjBA,WAEF,IACE,MAAOC,SAAgBZ,QAAQa,IAAI,CAACV,EAAcJ,IAClD,GAAIa,EAAOH,UAAuC,MAA3BG,EAAOH,SAASK,OAErChB,KAAKiB,OAAOC,OAAO,iBAAkBpB,GACrCE,KAAKmB,QAAQC,KAAK,kBACb,CACL,MAAMP,EAAQC,EAAOD,OAAS,IAAIQ,MAAM,iBACxCrB,KAAKlB,WAAY,EACb+B,EAAMF,UAAsC,MAA1BE,EAAMF,SAASK,OACnChB,KAAKsB,SAAST,MAAM,YAEpBb,KAAKsB,SAAST,MAAM,QAExB,CACF,CAAE,MAAOA,GAEPb,KAAKlB,WAAY,EACjBkB,KAAKsB,SAAST,MAAM,OACtB,CACF,I,UCjEJ,MAAMU,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASrD,KAEpE,O","sources":["webpack://sanyue_imghub/./src/views/AdminLogin.vue?1f0e","webpack://sanyue_imghub/./src/views/AdminLogin.vue","webpack://sanyue_imghub/./src/views/AdminLogin.vue?1f30"],"sourcesContent":["import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_BaseLogin = _resolveComponent(\"BaseLogin\");\n  return _openBlock(), _createBlock(_component_BaseLogin, {\n    title: \"管理端登录\",\n    fields: $data.loginFields,\n    \"submit-text\": \"登录\",\n    \"background-key\": \"adminLoginBkImg\",\n    \"is-admin\": true,\n    loading: $data.isLoading,\n    onSubmit: $options.handleLogin\n  }, null, 8, [\"fields\", \"loading\", \"onSubmit\"]);\n}","import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport BaseLogin from '@/components/BaseLogin.vue';\nimport axios from '@/utils/axios';\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      loginFields: [{\n        key: 'username',\n        label: '用户名',\n        placeholder: '请输入用户名',\n        type: 'text',\n        icon: 'User'\n      }, {\n        key: 'password',\n        label: '密码',\n        placeholder: '请输入密码',\n        type: 'password',\n        showPassword: true,\n        icon: 'Lock'\n      }]\n    };\n  },\n  components: {\n    BaseLogin\n  },\n  methods: {\n    async handleLogin(formData) {\n      const {\n        username,\n        password\n      } = formData;\n      const credentials = btoa(`${username}:${password}`); // Base64 编码\n\n      this.isLoading = true;\n\n      // Min delay promise\n      const minDelayPromise = new Promise(resolve => setTimeout(resolve, 1000));\n      // Request promise handling its own error to return it\n      const loginPromise = axios.get('/api/manage/check', {\n        headers: {\n          'Authorization': `Basic ${credentials}`\n        },\n        withCredentials: true\n      }).then(response => ({\n        response\n      })).catch(error => ({\n        error\n      }));\n      try {\n        const [result] = await Promise.all([loginPromise, minDelayPromise]);\n        if (result.response && result.response.status === 200) {\n          // 认证成功，存储认证信息，跳转到管理页面\n          this.$store.commit('setCredentials', credentials);\n          this.$router.push('/dashboard');\n        } else {\n          const error = result.error || new Error('Unknown error');\n          this.isLoading = false;\n          if (error.response && error.response.status === 401) {\n            this.$message.error('用户名或密码错误');\n          } else {\n            this.$message.error('服务器错误');\n          }\n        }\n      } catch (error) {\n        // Should not reach here due to inner catch, but just in case\n        this.isLoading = false;\n        this.$message.error('系统错误');\n      }\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./AdminLogin.vue?vue&type=template&id=bc2c2164\"\nimport script from \"./AdminLogin.vue?vue&type=script&lang=js\"\nexport * from \"./AdminLogin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.26_vue@3.5.26_webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_BaseLogin","title","fields","loginFields","loading","isLoading","onSubmit","handleLogin","data","key","label","placeholder","type","icon","showPassword","components","BaseLogin","methods","formData","username","password","credentials","btoa","this","minDelayPromise","Promise","resolve","setTimeout","loginPromise","axios","get","headers","withCredentials","then","response","catch","error","result","all","status","$store","commit","$router","push","Error","$message","__exports__"],"ignoreList":[],"sourceRoot":""}