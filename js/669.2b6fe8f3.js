"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[669],{732:function(e,t,n){e.exports=n.p+"img/background.ea1b7ee7.jpg"},1568:function(e,t,n){n.d(t,{A:function(){return m}});var a=n(4908),i=n(6047),s=n(717);const o={id:"themeMask"},r=["cx","cy","r"],l=["r"],c=["opacity"];function u(e,t,n,u,d,g){const h=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("div",{id:"themeToggle",onClick:t[0]||(t[0]=(...e)=>g.handleToggleClick&&g.handleToggleClick(...e))},[(0,a.bF)(i.eB,{name:"icon-fade",mode:"out-in"},{default:(0,a.k6)(()=>[d.isAuto?((0,a.uX)(),(0,a.Wv)(h,{key:"auto-mode",icon:"circle-half-stroke",class:"auto-icon",style:{"font-size":"1.5em",color:"var(--theme-toggle-color)"}})):((0,a.uX)(),(0,a.CE)("svg",{key:"sun-moon",class:(0,s.C4)(["theme_toggle_svg",{dark:d.isDark}]),width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",stroke:"currentColor"},[(0,a.Lk)("mask",o,[t[1]||(t[1]=(0,a.Lk)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"},null,-1)),(0,a.Lk)("circle",{class:"theme_toggle_circle1",fill:"black",cx:d.isDark?"50%":"100%",cy:d.isDark?"23%":"0%",r:d.isDark?"9":"5"},null,8,r)]),(0,a.Lk)("circle",{class:"theme_toggle_circle2",cx:"12",cy:"12",r:d.isDark?"9":"5",mask:"url(#themeMask)"},null,8,l),(0,a.Lk)("g",{class:"theme_toggle_g",stroke:"currentColor",opacity:d.isDark?0:1},[...t[2]||(t[2]=[(0,a.Lk)("line",{x1:"12",y1:"1",x2:"12",y2:"3"},null,-1),(0,a.Lk)("line",{x1:"12",y1:"21",x2:"12",y2:"23"},null,-1),(0,a.Lk)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},null,-1),(0,a.Lk)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},null,-1),(0,a.Lk)("line",{x1:"1",y1:"12",x2:"3",y2:"12"},null,-1),(0,a.Lk)("line",{x1:"21",y1:"12",x2:"23",y2:"12"},null,-1),(0,a.Lk)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},null,-1),(0,a.Lk)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},null,-1)])],8,c)],2))]),_:1})])}var d={name:"ToggleDark",data(){return{isDark:this.$store.getters.useDarkMode,isAuto:!this.$store.getters.cusDarkMode}},methods:{handleToggleClick(){this.isAuto?(this.isDark=!1,this.isAuto=!1,this.$store.commit("setCusDarkMode",!0),this.$store.commit("setUseDarkMode",!1)):this.isDark?(this.isAuto=!0,this.$store.commit("setCusDarkMode",!1)):(this.isDark=!0,this.$store.commit("setCusDarkMode",!0),this.$store.commit("setUseDarkMode",!0))}}},g=n(5074);const h=(0,g.A)(d,[["render",u],["__scopeId","data-v-466b2b5c"]]);var m=h},3539:function(e,t,n){var a=n(5272);t.A={data(){return{bingWallPaperIndex:0,customWallPaperIndex:0,backgroundInterval:null,backgroundInitParams:null}},computed:{...(0,a.L8)(["userConfig","bingWallPapers","useDarkMode"]),bkInterval(){return this.userConfig?.bkInterval||3e3},bkOpacity(){return this.userConfig?.bkOpacity||1},backgroundImagesTemplate(){return'\n        <img id="bg1" class="background-image1" alt="Background Image"/>\n        <img id="bg2" class="background-image2" alt="Background Image"/>\n      '},backgroundImagesStyles(){return"\n        .background-image1 {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          z-index: -1;\n          opacity: 0;\n          transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), filter 0.3s ease;\n          filter: var(--background-image-filter, brightness(1));\n        }\n        .background-image2 {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          z-index: -1;\n          opacity: 0;\n          transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), filter 0.3s ease;\n          filter: var(--background-image-filter, brightness(1));\n        }\n      "}},watch:{useDarkMode(e,t){e!==t&&this.backgroundInitParams&&this.$nextTick(()=>{this.smoothThemeTransition(this.backgroundInitParams.configKey,this.backgroundInitParams.containerSelector,this.backgroundInitParams.useDefaultBackground,this.backgroundInitParams.autoCreateElements)})}},mounted(){this.injectBackgroundStyles()},beforeUnmount(){this.backgroundInterval&&clearInterval(this.backgroundInterval),this.clearBackgroundImages(!0),this.removeBackgroundStyles()},methods:{injectBackgroundStyles(){const e="background-manager-styles";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent=this.backgroundImagesStyles,document.head.appendChild(t)}},removeBackgroundStyles(){const e="background-manager-styles",t=document.getElementById(e);t&&t.remove()},createBackgroundElements(e){if(!e)return void console.warn("未提供有效的容器元素");if(document.getElementById("bg1")||document.getElementById("bg2"))return;const t=document.createElement("img");t.id="bg1",t.className="background-image1",t.alt="Background Image";const n=document.createElement("img");n.id="bg2",n.className="background-image2",n.alt="Background Image",e.insertBefore(t,e.firstChild),e.insertBefore(n,e.firstChild)},initializeBackground(e,t=".login",n=!1,a=!1){if(this.backgroundInitParams={configKey:e,containerSelector:t,useDefaultBackground:n,autoCreateElements:a},a){const e=document.querySelector(t);!e||document.getElementById("bg1")&&document.getElementById("bg2")||this.createBackgroundElements(e)}const i=document.getElementById("bg1"),s=document.getElementById("bg2");if(!i||!s)return void console.warn("背景图元素 #bg1 或 #bg2 未找到，请确保页面中包含这些元素或启用 autoCreateElements");const o=this.userConfig?.[e];"bing"===o?this.setupBingWallpaper(i,s,t):Array.isArray(o)&&o.length>1?this.setupCustomWallpaperCarousel(i,s,o,t):Array.isArray(o)&&1===o.length?this.setupSingleCustomWallpaper(i,o[0],t):n&&this.setupDefaultWallpaper(i,t)},setupBingWallpaper(e,t,n){this.$store.dispatch("fetchBingWallPapers").then(()=>{0!==this.bingWallPapers.length&&(this.loadBackgroundImage(e,this.bingWallPapers[this.bingWallPaperIndex]?.url,n),this.backgroundInterval=setInterval(()=>{this.switchBingWallpaper(e,t)},this.bkInterval))})},setupCustomWallpaperCarousel(e,t,n,a){this.loadBackgroundImage(e,n[this.customWallPaperIndex],a),this.backgroundInterval=setInterval(()=>{this.switchCustomWallpaper(e,t,n)},this.bkInterval)},setupSingleCustomWallpaper(e,t,n){this.loadBackgroundImage(e,t,n)},setupDefaultWallpaper(e,t){const a=this.useDarkMode,i=n(a?732:7835);this.loadBackgroundImage(e,i,t)},loadBackgroundImage(e,t,n){e.src=t,e.onload=()=>{e.style.opacity=this.bkOpacity;const t=document.querySelector(n);t&&(t.style.background="transparent")}},switchBingWallpaper(e,t){if(0===this.bingWallPapers.length)return;const n=0!=e.style.opacity?e:t,a=0!=e.style.opacity?t:e;n.style.opacity=0,this.bingWallPaperIndex=(this.bingWallPaperIndex+1)%this.bingWallPapers.length,a.src=this.bingWallPapers[this.bingWallPaperIndex]?.url,a.onload=()=>{a.style.opacity=this.bkOpacity}},switchCustomWallpaper(e,t,n){const a=0!=e.style.opacity?e:t,i=0!=e.style.opacity?t:e;a.style.opacity=0,this.customWallPaperIndex=(this.customWallPaperIndex+1)%n.length,i.src=n[this.customWallPaperIndex],i.onload=()=>{i.style.opacity=this.bkOpacity}},clearBackgroundInterval(){this.backgroundInterval&&(clearInterval(this.backgroundInterval),this.backgroundInterval=null)},clearBackgroundImages(e=!1){const t=document.getElementById("bg1"),n=document.getElementById("bg2");e?(t&&(t.style.transition="none",t.style.opacity=0,t.src="",setTimeout(()=>{t&&(t.style.transition="opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1)")},50)),n&&(n.style.transition="none",n.style.opacity=0,n.src="",setTimeout(()=>{n&&(n.style.transition="opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1)")},50))):(t&&(t.style.opacity=0,setTimeout(()=>{t&&(t.src="")},800)),n&&(n.style.opacity=0,setTimeout(()=>{n&&(n.src="")},800)))},smoothThemeTransition(e,t=".login",a=!1,i=!1){const s=this.userConfig?.[e];if(!a||void 0!==s)return void this.reinitializeBackground(e,t,a,i);const o=document.getElementById("bg1"),r=document.getElementById("bg2");if(!o||!r)return void this.reinitializeBackground(e,t,a,i);const l=0!=o.style.opacity?o:r,c=0!=o.style.opacity?r:o,u=this.useDarkMode,d=n(u?732:7835),g=new Image;g.onload=()=>{c.src=d,c.onload=()=>{l.style.opacity=0,setTimeout(()=>{c.style.opacity=this.bkOpacity;const e=document.querySelector(t);e&&(e.style.background="transparent")},50)}},g.onerror=()=>{console.warn("主题背景图预加载失败，回退到直接切换"),this.reinitializeBackground(e,t,a,i)},g.src=d},reinitializeBackground(e,t=".login",n=!1,a=!1){this.clearBackgroundInterval(),this.clearBackgroundImages(!0),this.bingWallPaperIndex=0,this.customWallPaperIndex=0,setTimeout(()=>{this.initializeBackground(e,t,n,a)},100)}}}},4727:function(e,t,n){n(182)},6521:function(e,t,n){n.d(t,{A:function(){return g}});var a=n(4908),i=n(717);const s={key:0,class:"page-footer"},o=["href"];function r(e,t,n,r,l,c){const u=(0,a.g2)("font-awesome-icon");return c.disableFooter?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("p",null,[(0,a.eW)("© 2024-"+(0,i.v_)(c.thisYear)+" Designed by ",1),t[0]||(t[0]=(0,a.Lk)("a",{class:"footer-name",href:"https://github.com/MarSeventh",target:"_blank"},"SanyueQi",-1)),t[1]||(t[1]=(0,a.eW)(" for You! ",-1)),(0,a.Lk)("a",{href:c.footerLink,target:"_blank"},[(0,a.bF)(u,{icon:"paper-plane",class:"footer-link-icon"})],8,o)])]))}var l=n(5272),c={name:"Footer",computed:{...(0,l.L8)(["userConfig"]),footerLink(){return this.userConfig?.footerLink||"https://github.com/MarSeventh"},thisYear(){return(new Date).getFullYear()},disableFooter(){return this.userConfig?.disableFooter||!1}}},u=n(5074);const d=(0,u.A)(c,[["render",r],["__scopeId","data-v-08acbaa9"]]);var g=d},6669:function(e,t,n){n.d(t,{A:function(){return x}});var a=n(6521),i=n(3115),s=(n(182),n(1210),n(7482)),o=(n(7802),n(4447)),r=(n(4727),n(1568)),l=n(4908),c=n(717),u=n(6047);const d={class:"login-container"},g={class:"login-title",tabindex:"0"},h={class:"input-wrapper"},m={class:"submit-wrapper"},k={key:0,class:"loading-ring"};function p(e,t,n,p,y,b){const f=r.A,I=o.tk,v=s.WK,B=(0,l.g2)("ArrowRight"),x=i.S2,C=a.A;return(0,l.uX)(),(0,l.CE)("div",{class:(0,c.C4)(["login",{"is-focused":y.isFocused}])},[(0,l.bF)(f,{class:"toggle-dark"}),(0,l.Lk)("div",d,[(0,l.Lk)("h1",g,(0,c.v_)(n.title),1),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.fields,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:e.key,class:"input-container"},[(0,l.Lk)("label",{class:"input-name",ref_for:!0,ref:`inputLabel${t}`,style:(0,c.Tr)({"--underline-width":y.labelUnderlineWidths[t]+"px"})},(0,c.v_)(e.label),5),(0,l.Lk)("div",h,[(0,l.bF)(v,{modelValue:y.formData[e.key],"onUpdate:modelValue":t=>y.formData[e.key]=t,placeholder:e.placeholder,type:e.type||"text","show-password":e.showPassword,class:"password-input",onKeyup:(0,u.jR)(b.handleSubmit,["enter","native"]),onFocus:b.handleInputFocus,onBlur:b.handleInputBlur},(0,l.eX)({_:2},[e.icon?{name:"prefix",fn:(0,l.k6)(()=>[(0,l.bF)(I,{class:"el-input__icon"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.icon)))]),_:2},1024)]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","type","show-password","onKeyup","onFocus","onBlur"])])]))),128)),(0,l.Lk)("div",m,[(0,l.bF)(x,{class:(0,c.C4)(["submit-circle",{"is-loading":n.loading}]),type:"primary",circle:"",onClick:b.handleSubmit,disabled:n.loading},{default:(0,l.k6)(()=>[n.loading?((0,l.uX)(),(0,l.CE)("div",k)):((0,l.uX)(),(0,l.Wv)(I,{key:1,size:"20"},{default:(0,l.k6)(()=>[(0,l.bF)(B)]),_:1}))]),_:1},8,["class","onClick","disabled"])])]),(0,l.bF)(C,{class:"footer"})],2)}n(7932),n(9329);var y=n(4509),b=n(5272),f=n(3539),I={name:"BaseLogin",mixins:[f.A],props:{title:{type:String,required:!0},fields:{type:Array,required:!0},submitText:{type:String,default:"登录"},backgroundKey:{type:String,required:!0},isAdmin:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},data(){return{formData:{},labelUnderlineWidths:[],isFocused:!1}},computed:{...(0,b.L8)(["userConfig"])},watch:{fields:{handler(){this.$nextTick(()=>{this.calculateLabelWidths()})},deep:!0}},components:{Footer:a.A,ToggleDark:r.A,ArrowRight:y.ArrowRight},mounted(){this.initFormData(),this.initializeBackground(this.backgroundKey,".login",!this.isAdmin,!0),this.$nextTick(()=>{this.calculateLabelWidths()})},methods:{initFormData(){const e={};this.fields.forEach(t=>{e[t.key]=""}),this.formData=e,this.labelUnderlineWidths=new Array(this.fields.length).fill(0)},calculateLabelWidths(){this.$nextTick(()=>{this.fields.forEach((e,t)=>{const n=this.$refs[`inputLabel${t}`];if(n&&n[0]){const a=document.createElement("canvas"),i=a.getContext("2d"),s=n[0],o=window.getComputedStyle(s);i.font=`${o.fontWeight} ${o.fontSize} ${o.fontFamily}`;const r=i.measureText(e.label).width;this.labelUnderlineWidths[t]=Math.ceil(r)+3}})})},handleSubmit(){this.loading||this.$emit("submit",{...this.formData})},handleInputFocus(e){this.isFocused=!0;const t=e.target.closest(".input-container");if(t){const e=t.querySelector(".input-wrapper");e&&e.classList.add("focused")}},handleInputBlur(e){this.isFocused=!1;const t=e.target.closest(".input-container");if(t){const e=t.querySelector(".input-wrapper");e&&e.classList.remove("focused")}}}},v=n(5074);const B=(0,v.A)(I,[["render",p],["__scopeId","data-v-4ee1c032"]]);var x=B},7835:function(e,t,n){e.exports=n.p+"img/background-light.f17603bc.jpg"}}]);
//# sourceMappingURL=669.2b6fe8f3.js.map